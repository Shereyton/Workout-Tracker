<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Workout Tracker Pro</title>
<meta name="description" content="Lightweight mobile workout tracker with export + AI summary">
<style>
:root{
  --grad-main:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
  --grad-accent:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);
  --grad-success:linear-gradient(135deg,#11998e 0%,#38ef7d 100%);
  --grad-header:linear-gradient(135deg,#2c3e50,#34495e);
  --danger:#dc3545;
  --radius:20px;
  --transition:0.25s cubic-bezier(.4,.0,.2,1);
}
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--grad-main);min-height:100vh;padding:10px;color:#222;transition:background .4s,color .3s;}
body.dark{background:#181a1f;color:#f5f6fa;}
.container{max-width:520px;margin:0 auto;background:#fff;border-radius:var(--radius);box-shadow:0 12px 32px -8px rgba(0,0,0,.25);overflow:hidden;animation:fadeIn .4s;}
body.dark .container{background:#262a33;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
.header{position:relative;padding:20px 20px 18px;text-align:center;background:var(--grad-header);color:#fff;}
.header h1{font-size:24px;font-weight:700;margin-bottom:6px;}
.date{font-size:13px;opacity:.85;}
.section{padding:20px 20px 28px;}
select,input[type=number],input[type=text]{width:100%;font-size:16px;padding:13px 14px;border:2px solid #e1e8ed;border-radius:14px;background:#fff;transition:var(--transition);margin-bottom:12px;font-weight:500;}
body.dark select,body.dark input{background:#1e2127;border-color:#39414d;color:#f5f6fa;}
select:focus,input:focus{outline:none;border-color:#667eea;}
.inline-row{display:flex;gap:10px;}
.inline-row .field{flex:1;}
.current-exercise{background:var(--grad-accent);color:#fff;padding:16px 14px;border-radius:16px;margin:8px 0 18px;text-align:center;box-shadow:0 6px 18px -6px rgba(245,90,150,.45);}
.current-exercise h2{font-size:20px;margin-bottom:4px;}
.current-exercise .set-info{font-size:13px;opacity:.95;}
.btn{width:100%;border:none;cursor:pointer;padding:15px 16px;font-size:16px;font-weight:600;border-radius:14px;margin-bottom:12px;transition:var(--transition);letter-spacing:.3px;display:inline-flex;justify-content:center;align-items:center;}
.btn:active{transform:scale(.97);}
.btn-primary{background:var(--grad-main);color:#fff;}
.btn-primary:hover{filter:brightness(1.05);}
.btn-secondary{background:#f0f3f6;color:#555;}
.btn-secondary:hover{background:#e2e8ef;}
body.dark .btn-secondary{background:#313641;color:#cfd4dc;}
body.dark .btn-secondary:hover{background:#3c4350;}
.btn-export{background:var(--grad-success);color:#fff;}
.btn-export:hover{filter:brightness(1.06);}
.btn-reset{background:#6c757d;color:#fff;}
.btn-reset:hover{background:#5a6268;}
body.dark .btn-reset{background:#505864;}
body.dark .btn-reset:hover{background:#616c7b;}
.sets-history{margin-top:20px;}
.sets-history h3{font-size:16px;margin-bottom:12px;letter-spacing:.5px;}
.set-item{background:#f8f9fa;border:1px solid #e5e9ef;padding:10px 14px;border-radius:10px;margin-bottom:8px;display:flex;justify-content:space-between;gap:10px;align-items:center;flex-wrap:wrap;font-size:14px;}
body.dark .set-item{background:#20242a;border-color:#2c323a;}
.set-label{font-weight:600;}
.set-meta{opacity:.85;}
.set-actions{display:flex;gap:6px;}
.btn-mini{border:none;padding:4px 8px;font-size:12px;border-radius:6px;cursor:pointer;font-weight:600;transition:var(--transition);}
.btn-mini.edit{background:#ffc107;color:#222;}
.btn-mini.edit:hover{background:#ffb300;}
.btn-mini.del{background:var(--danger);color:#fff;}
.btn-mini.del:hover{background:#b3202d;}
.edit-form{width:100%;background:#e3f2fd;padding:8px 10px 10px;border-radius:8px;margin-top:6px;display:flex;flex-direction:column;gap:8px;}
body.dark .edit-form{background:#29374a;}
.edit-form .row{display:flex;gap:8px;}
.edit-form input{margin:0;font-size:14px;padding:8px;border-radius:6px;}
.edit-form .row2{display:flex;gap:6px;}
.edit-form .row2 button{flex:1;}
.rest-timer{background:linear-gradient(135deg,#ff9a9e 0%,#fecfef 100%);color:#2c3e50;padding:15px 18px;border-radius:14px;text-align:center;font-weight:600;margin-bottom:16px;cursor:pointer;user-select:none;animation:fadeIn .35s;}
body.dark .rest-timer{background:#3a3440;color:#f1d9e8;}
.timer-display{font-size:26px;font-weight:700;margin-top:4px;}
.summary{margin-top:26px;background:#f8f9fa;border:1px solid #e6eaef;padding:16px 18px;border-radius:16px;font-size:14px;line-height:1.5;word-break:break-word;}
body.dark .summary{background:#20242a;border-color:#2d333c;}
.summary h3{margin:0 0 10px;font-size:16px;}
.notice{font-size:12px;opacity:.65;margin-top:4px;}
.badge{display:inline-block;background:#edf2ff;color:#344675;padding:2px 8px;font-size:11px;border-radius:999px;margin-left:6px;font-weight:600;}
body.dark .badge{background:#303d52;color:#b8c8e6;}
.hidden{display:none!important;}
.footer-space{height:70px;}
#darkToggle{position:fixed;bottom:calc(14px + env(safe-area-inset-bottom));right:14px;z-index:1000;background:rgba(255,255,255,0.9);color:#222;padding:12px 15px;border:none;border-radius:18px;font-size:14px;font-weight:600;display:flex;align-items:center;gap:6px;box-shadow:0 8px 24px -6px rgba(0,0,0,.3);cursor:pointer;backdrop-filter:blur(6px);transition:var(--transition);}
#darkToggle:active{transform:scale(.94);}
#darkToggle:hover{background:#fff;}
body.dark #darkToggle{background:rgba(40,43,50,0.9);color:#f5f6fa;box-shadow:0 8px 24px -6px rgba(0,0,0,.6);}
#darkToggle small{font-size:11px;opacity:.65;font-weight:500;letter-spacing:.3px;}
@media(max-width:380px){#darkToggle{padding:10px 12px;font-size:13px;}}
@keyframes pulseHint{0%{box-shadow:0 0 0 0 rgba(255,255,255,.45);}70%{box-shadow:0 0 0 14px rgba(255,255,255,0);}100%{box-shadow:0 0 0 0 rgba(255,255,255,0);}}
body.dark #darkToggle{animation:pulseHint 4s infinite;}
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>💪 Workout Tracker <span class="badge">Pro</span></h1>
      <div id="today" class="date"></div>
    </div>
    <div class="section">
      <div class="inline-row" style="margin-bottom:6px;">
        <input type="text" id="customExercise" placeholder="Add Custom Exercise">
        <button id="addExercise" class="btn btn-secondary" style="flex:0 0 120px;padding:12px;">Add</button>
      </div>
      <select id="exerciseSelect">
        <option value="">Select Exercise</option>
        <option>Bench Press</option>
        <option>Incline Bench Press</option>
        <option>Squats</option>
        <option>Straight Arm Bicep Curls</option>
        <option>Lat Pulldown (Underhand)</option>
        <option>Lat Pulldown (Overhand)</option>
      </select>
      <div id="interface" class="hidden">
        <div class="current-exercise">
          <h2 id="exerciseName"></h2>
          <div class="set-info">Set <span id="setCounter">1</span></div>
        </div>
        <div class="inline-row" style="margin-bottom:8px;">
          <label class="field" style="display:flex;align-items:center;gap:8px;">
            <input type="checkbox" id="useTimer" checked>
            <span style="font-size:14px;">Use rest timer</span>
          </label>
          <div class="field">
            <input type="number" id="restSecsInput" min="10" step="5" value="90" placeholder="Rest (sec)">
          </div>
        </div>
        <div id="restBox" class="rest-timer hidden">
          <div>Rest Time</div>
          <div id="restDisplay" class="timer-display">01:30</div>
          <div style="font-size:11px;margin-top:4px;opacity:.8;">Tap to cancel</div>
        </div>
        <div class="inline-row">
          <div class="field">
            <input type="number" id="weight" min="0" step="1" placeholder="Weight (lbs)">
          </div>
          <div class="field">
            <input type="number" id="reps" min="1" step="1" placeholder="Reps">
          </div>
        </div>
        <button id="logBtn" class="btn btn-primary">Log Set</button>
        <button id="nextExerciseBtn" class="btn btn-secondary">Next Exercise</button>
        <button id="resetBtn" class="btn btn-reset">Reset Workout</button>
        <div class="sets-history">
          <h3>Today's Sets</h3>
          <div id="setsList"></div>
        </div>
      </div>
      <div class="summary" id="summaryBox">
        <h3>Workout Summary</h3>
        <div id="summaryText">Start your first exercise to begin tracking.</div>
        <div class="notice">Autosaves locally. Export when finished.</div>
      </div>
      <button id="exportBtn" class="btn btn-export">Export (JSON + AI + CSV)</button>
    </div>
  </div>
  <div class="footer-space"></div>
  <button id="darkToggle" aria-label="Toggle dark mode"><span id="themeIcon">🌙</span><span id="themeLabel">Dark</span></button>
<script>
let session=JSON.parse(localStorage.getItem('wt_session'))||{exercises:[],startedAt:null};
let currentExercise=JSON.parse(localStorage.getItem('wt_currentExercise'))||null;
let restTimer=null,restSecondsRemaining=0,restStartMs=0,restSetIndex=null;
const todayEl=document.getElementById('today'),darkToggle=document.getElementById('darkToggle'),themeIcon=document.getElementById('themeIcon'),themeLabel=document.getElementById('themeLabel'),exerciseSelect=document.getElementById('exerciseSelect'),interfaceBox=document.getElementById('interface'),exerciseNameEl=document.getElementById('exerciseName'),setCounterEl=document.getElementById('setCounter'),weightInput=document.getElementById('weight'),repsInput=document.getElementById('reps'),logBtn=document.getElementById('logBtn'),setsList=document.getElementById('setsList'),summaryText=document.getElementById('summaryText'),nextExerciseBtn=document.getElementById('nextExerciseBtn'),resetBtn=document.getElementById('resetBtn'),exportBtn=document.getElementById('exportBtn'),restBox=document.getElementById('restBox'),restDisplay=document.getElementById('restDisplay'),useTimerEl=document.getElementById('useTimer'),restSecsInput=document.getElementById('restSecsInput'),addExerciseBtn=document.getElementById('addExercise'),customExerciseInput=document.getElementById('customExercise');

// init
todayEl.textContent=new Date().toLocaleDateString('en-US',{weekday:'long',year:'numeric',month:'long',day:'numeric'});
if(currentExercise){interfaceBox.classList.remove('hidden');exerciseNameEl.textContent=currentExercise.name;currentExercise.sets.forEach((s,i)=>addSetElement(s,i));setCounterEl.textContent=currentExercise.nextSet;} 
updateSummary();

// theme
darkToggle.addEventListener('click',()=>{document.body.classList.toggle('dark');const d=document.body.classList.contains('dark');themeIcon.textContent=d?'☀️':'🌙';themeLabel.textContent=d?'Light':'Dark';localStorage.setItem('wt_theme',d?'dark':'light');});
if(localStorage.getItem('wt_theme')==='dark'){document.body.classList.add('dark');themeIcon.textContent='☀️';themeLabel.textContent='Light';}

// custom
